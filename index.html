<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Believe - A storytelling card game for 2-6 players. Tell extraordinary stories and challenge others to believe or doubt your tales.">
  <title>Believe - The Storytelling Card Game</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- WELCOME SCREEN -->
  <div id="welcome-screen" class="screen active">
    <div class="container">
      <h1 class="text-center mb-lg">
        BE<span class="text-red">LIE</span>VE
      </h1>
      <p class="text-center mb-xl" style="font-size: 1.25rem; color: var(--color-noir-silver);">
        A storytelling game of truth and deception
      </p>

      <div style="text-align: center; display: flex; gap: var(--spacing-md); justify-content: center; flex-wrap: wrap;">
        <button id="start-game-btn" class="btn btn-primary btn-large">Start Game</button>
        <button id="rules-btn" class="btn btn-secondary btn-large">Rules</button>
        <button id="back-to-sa-btn" class="btn btn-secondary btn-large">Back to SA</button>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl); opacity: 0.6;">
        <p style="font-size: 0.85rem; color: var(--color-noir-silver); margin-bottom: var(--spacing-xs);">
          © 2025 Simon Allmer Entertainment
        </p>
        <p style="font-size: 0.8rem; color: var(--color-noir-silver);">
          Illustrations by Mayank Kumarr
        </p>
      </div>
    </div>
  </div>

  <!-- GAME MODE SELECTION SCREEN -->
  <div id="mode-selection-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-lg">Choose Game Mode</h2>

      <div
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg); max-width: 900px; margin: 0 auto;">

        <!-- Classic Mode -->
        <div class="game-mode-card" id="classic-mode-card">
          <h3 class="text-red">Classic Mode</h3>
          <p class="mb-md">Tell one extraordinary story based on 3 cards. Will it be truth or lie?</p>
          <ul
            style="text-align: left; color: var(--color-noir-silver); font-size: 0.9rem; margin-bottom: var(--spacing-md);">
            <li>Draw 3 cards</li>
            <li>Choose Truth or Lie</li>
            <li>1 minute prep, 3 minutes storytelling</li>
            <li>Others vote and earn points</li>
          </ul>
          <button class="btn btn-primary" style="width: 100%;">Play Classic</button>
        </div>

        <!-- Hide The Lie Mode -->
        <div class="game-mode-card" id="hide-lie-mode-card">
          <h3 class="text-red">Hide The Lie</h3>
          <p class="mb-md">Tell 3 quick unrelated stories - but one is a lie! Can others spot it?</p>
          <ul
            style="text-align: left; color: var(--color-noir-silver); font-size: 0.9rem; margin-bottom: var(--spacing-md);">
            <li>Draw 3 cards</li>
            <li>Choose which card is the lie</li>
            <li>3 minutes for 3 separate stories</li>
            <li>Others guess which story is false</li>
          </ul>
          <button class="btn btn-primary" style="width: 100%;">Play Hide The Lie</button>
        </div>

      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="back-to-welcome-from-modes" class="btn btn-secondary">Back to Menu</button>
      </div>
    </div>
  </div>

  <!-- RULES SCREEN -->
  <div id="rules-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-lg">How to Play Believe</h2>

      <div class="game-info">
        <h3>Objective</h3>
        <p>Be the first player to reach the target score by correctly guessing if other players' stories are true or
          false, and by successfully convincing others of your own stories.</p>

        <h3>Setup</h3>
        <ol>
          <li>Choose 3-6 players.</li>
          <li>Each player selects a unique player token/color.</li>
          <li>Shuffle the deck of story cards and place them face down.</li>
          <li>Determine a target score (e.g., 10 points for a shorter game, 15 for longer).</li>
        </ol>

        <h3>Gameplay (Rounds)</h3>
        <p>The game is played in rounds. Each round, a different player takes on the role of the Storyteller.</p>

        <h4>Storyteller's Turn:</h4>
        <ol>
          <li><strong>Draw Cards:</strong> The Storyteller draws 3 story cards. These cards contain words, phrases, or
            concepts that must be incorporated into their story.</li>
          <li><strong>Choose Truth or Lie:</strong> The Storyteller secretly decides if their story will be a TRUTH (a
            real event from their life, incorporating the cards) or a LIE (a fabricated story, incorporating the cards).
            This choice is kept secret from other players.</li>
          <li><strong>Prepare Story (1 minute):</strong> The Storyteller has 1 minute to prepare their extraordinary
            tale, ensuring it uses all three drawn cards.</li>
          <li><strong>Tell Story (up to 3 minutes):</strong> The Storyteller tells their story to the other players.
            They can end their story early if they wish.</li>
          <li><strong>Question Time:</strong> After the story, the other players (as a group) may ask the Storyteller
            ONE question about their story. The Storyteller must answer truthfully, regardless of whether their story
            was a truth or a lie.</li>
        </ol>

        <h4>Other Players' Turn (Voting):</h4>
        <ol>
          <li><strong>Vote:</strong> After the question and answer, each non-storyteller player secretly votes whether
            they BELIEVE the story (they think it's TRUTH) or DOUBT the story (they think it's a LIE).</li>
          <li><strong>Reveal:</strong> All votes are revealed simultaneously.</li>
        </ol>

        <h3>Scoring</h3>
        <ul>
          <li><strong>If the Storyteller told a TRUTH:</strong>
            <ul>
              <li>Storyteller: +1 point for each player who BELIEVED their story.</li>
              <li>Believing Players: +1 point for each player who correctly BELIEVED the story.</li>
            </ul>
          </li>
          <li><strong>If the Storyteller told a LIE:</strong>
            <ul>
              <li>Storyteller: +1 point for each player who DOUBTED their story.</li>
              <li>Doubting Players: +1 point for each player who correctly DOUBTED the story.</li>
            </ul>
          </li>
        </ul>
        <p>Players do not lose points for incorrect guesses.</p>

        <h3>Winning the Game</h3>
        <p>The first player to reach or exceed the target score wins the game!</p>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="back-to-welcome-btn" class="btn btn-secondary btn-large">Back to Home</button>
      </div>
    </div>
  </div>

  <!-- SETUP SCREEN -->
  <div id="setup-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-lg">Game Setup</h2>

      <div class="game-info">
        <p id="setup-game-description"><strong>How to Play:</strong> Each storyteller draws 3 cards and tells an
          extraordinary story. The story can
          be true or a lie. Other players must guess correctly to earn points!</p>
      </div>

      <h3 class="text-center mt-xl mb-md">Select Number of Players</h3>
      <div class="player-count-selector" id="player-count-selector">
        <button class="player-count-btn" data-count="2">2</button>
        <button class="player-count-btn" data-count="3">3</button>
        <button class="player-count-btn" data-count="4">4</button>
        <button class="player-count-btn" data-count="5">5</button>
        <button class="player-count-btn" data-count="6">6</button>
      </div>

      <div id="player-inputs-container" class="player-inputs hidden">
        <h3 class="text-center mt-xl mb-md">Enter Player Names</h3>
        <div id="player-inputs"></div>
        <div style="text-align: center; margin-top: var(--spacing-xl);">
          <button id="start-round-btn" class="btn btn-primary btn-large">Begin Game</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ROUND START SCREEN -->
  <div id="round-start-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-lg">Round <span id="round-number" class="text-red">1</span></h2>

      <div class="scoreboard">
        <div class="scoreboard-header">
          <h3>Scoreboard</h3>
          <p>Goal: <span id="point-goal" class="text-red">10</span> points</p>
        </div>
        <div id="scoreboard-list"></div>
      </div>

      <div class="game-info mt-xl">
        <p><strong>Current Storyteller:</strong> <span id="current-storyteller-name" class="text-red"></span></p>
        <p>The storyteller will draw 3 cards and prepare their story.</p>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="draw-cards-btn" class="btn btn-primary btn-large">Draw Cards</button>
      </div>
    </div>
  </div>

  <!-- CARD SELECTION SCREEN -->
  <div id="card-selection-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md">Your Story Cards</h2>
      <p class="text-center mb-lg" style="color: var(--color-noir-silver);">
        These are your 3 cards. Incorporate them into your story.
      </p>

      <div id="drawn-cards" class="card-grid"></div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="choose-truth-lie-btn" class="btn btn-primary btn-large">Continue</button>
      </div>
    </div>
  </div>

  <!-- TRUTH/LIE SELECTION SCREEN -->
  <div id="truth-lie-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md">Choose Your Path</h2>
      <p class="text-center mb-xl" style="color: var(--color-noir-silver); font-size: 1.1rem;">
        Will your story be truth or lie?<br>
        <em style="font-size: 0.9rem;">This choice is secret - other players cannot see it.</em>
      </p>

      <div style="display: flex; gap: var(--spacing-lg); justify-content: center; flex-wrap: wrap;">
        <button id="choose-truth-btn" class="btn btn-large"
          style="background: var(--color-noir-white); color: var(--color-noir-black); min-width: 200px;">
          ✓ TRUTH
        </button>
        <button id="choose-lie-btn" class="btn btn-large"
          style="background: var(--color-noir-red); color: var(--color-noir-white); min-width: 200px;">
          ✗ LIE
        </button>
      </div>
    </div>
  </div>

  <!-- PREPARATION TIMER SCREEN -->
  <div id="preparation-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md">Prepare Your Story</h2>
      <p class="text-center mb-lg" style="color: var(--color-noir-silver);">
        You have 1 minute to prepare your extraordinary tale.
      </p>

      <div class="timer-container">
        <div class="timer-label">Time Remaining</div>
        <div id="prep-timer-display" class="timer-display">1:00</div>
        <div class="timer-progress">
          <div id="prep-timer-bar" class="timer-progress-bar" style="width: 100%;"></div>
        </div>
      </div>

      <div class="game-info mt-xl">
        <p><strong>Your Choice:</strong> <span id="storyteller-choice-display" class="text-red"></span></p>
        <p><strong>Remember:</strong> Your story must be extraordinary and incorporate all 3 cards!</p>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="skip-prep-btn" class="btn btn-secondary btn-large">I'm Ready</button>
      </div>
    </div>
  </div>

  <!-- STORYTELLING TIMER SCREEN -->
  <div id="storytelling-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md" id="storytelling-title">Tell Your Story</h2>
      <p class="text-center mb-lg" style="color: var(--color-noir-silver);" id="storytelling-instructions">
        You have up to 3 minutes. You can end early when finished.
      </p>

      <div class="timer-container">
        <div class="timer-label">Time Remaining</div>
        <div id="story-timer-display" class="timer-display">3:00</div>
        <div class="timer-progress">
          <div id="story-timer-bar" class="timer-progress-bar" style="width: 100%;"></div>
        </div>

        <!-- Cards visible during storytelling -->
        <div id="storytelling-cards" class="card-grid" style="margin-top: var(--spacing-lg);"></div>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="end-story-btn" class="btn btn-primary btn-large">End Story</button>
      </div>
    </div>
  </div>

  <!-- QUESTION PHASE SCREEN -->
  <div id="question-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md">Question Time</h2>
      <p class="text-center mb-xl" style="color: var(--color-noir-silver); font-size: 1.1rem;">
        The other players may now ask <strong class="text-red">one question</strong> together to the storyteller.
      </p>

      <div class="game-info">
        <p><strong>Storyteller:</strong> <span id="question-storyteller-name" class="text-red"></span></p>
        <p>Discuss and ask your question. The storyteller will answer.</p>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="proceed-to-voting-btn" class="btn btn-primary btn-large">Proceed to Voting</button>
      </div>
    </div>
  </div>

  <!-- VOTING SCREEN -->
  <div id="voting-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md">Cast Your Votes</h2>
      <p class="text-center mb-lg" style="color: var(--color-noir-silver);">
        Each player votes: Was the story <strong>TRUTH</strong> or <strong>LIE</strong>?
      </p>

      <div class="game-info mb-xl">
        <p><strong>Storyteller:</strong> <span id="voting-storyteller-name" class="text-red"></span></p>
        <p>Starting from the left of the storyteller, each player makes their judgment.</p>
      </div>

      <div id="voting-grid" class="voting-grid"></div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="reveal-results-btn" class="btn btn-primary btn-large" disabled>Reveal Results</button>
      </div>
    </div>
  </div>

  <!-- HIDE THE LIE - VOTING SCREEN -->
  <div id="hide-lie-voting-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md">Which Story Was The Lie?</h2>
      <p class="text-center mb-lg" style="color: var(--color-noir-silver);">
        Each player selects which card they think was the lie.
      </p>

      <div class="game-info mb-xl">
        <p><strong>Storyteller:</strong> <span id="hide-lie-voting-storyteller" class="text-red"></span></p>
        <p>The storyteller told 3 stories. One was a lie. Which one?</p>
      </div>

      <div id="hide-lie-voting-grid" class="voting-grid"></div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="hide-lie-reveal-btn" class="btn btn-primary btn-large" disabled>Reveal Results</button>
      </div>
    </div>
  </div>

  <!-- RESULTS SCREEN -->
  <div id="results-screen" class="screen">
    <div class="container">
      <h2 class="text-center mb-md">The Reveal</h2>

      <div class="reveal-container">
        <p style="font-size: 1.25rem; color: var(--color-noir-silver);">The story was...</p>
        <div id="reveal-result" class="reveal-result"></div>
      </div>

      <div style="margin-top: var(--spacing-xl);">
        <h3 class="text-center mb-md">The Story Cards</h3>
        <p class="text-center mb-lg" style="color: var(--color-noir-silver); font-size: 0.95rem;">
          Verify that all 3 cards were incorporated into the story
        </p>
        <div id="reveal-cards" class="card-grid"></div>
      </div>

      <div class="game-info mt-xl">
        <h3 class="mb-md">Voting Results</h3>
        <div id="voting-results-list"></div>
      </div>

      <div class="scoreboard mt-xl">
        <div class="scoreboard-header">
          <h3>Updated Scores</h3>
          <p>Goal: <span id="results-point-goal" class="text-red">10</span> points</p>
        </div>
        <div id="results-scoreboard-list"></div>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="next-round-btn" class="btn btn-primary btn-large">Next Round</button>
        <button id="end-game-btn" class="btn btn-primary btn-large hidden">View Final Results</button>
      </div>
    </div>
  </div>

  <!-- GAME END SCREEN -->
  <div id="game-end-screen" class="screen">
    <div class="container">
      <h1 class="text-center mb-lg">
        Game <span class="text-red">Over</span>
      </h1>

      <div class="scoreboard">
        <div class="scoreboard-header">
          <h2>Final Standings</h2>
        </div>
        <div id="final-scoreboard-list"></div>
      </div>

      <div style="text-align: center; margin-top: var(--spacing-xl);">
        <button id="play-again-btn" class="btn btn-primary btn-large">Play Again</button>
      </div>
    </div>
  </div>

  <!-- PRIVACY OVERLAY (for passing device) -->
  <div id="privacy-overlay" class="privacy-overlay hidden">
    <h2 class="mb-md">Pass the Device</h2>
    <p id="privacy-message">Pass the device to the storyteller.</p>
    <button id="privacy-continue-btn" class="btn btn-primary btn-large">I'm Ready</button>
  </div>

  <!-- OPTIONS BUTTON (shown during gameplay) -->
  <button id="options-button" class="options-button hidden">⚙</button>

  <!-- OPTIONS MODAL -->
  <div id="options-modal" class="options-modal hidden">
    <div class="options-content">
      <div class="options-header">
        <h2>Game Options</h2>
        <button id="options-close" class="options-close">×</button>
      </div>

      <div class="options-section">
        <h3>Current Turn</h3>
        <div class="current-turn">
          <p><strong>Storyteller:</strong> <span id="options-storyteller"></span></p>
          <p><strong>Round:</strong> <span id="options-round"></span></p>
        </div>
      </div>

      <div class="options-section">
        <h3>Scoreboard</h3>
        <div class="options-scoreboard">
          <div id="options-scores"></div>
        </div>
        <p
          style="text-align: center; margin-top: var(--spacing-sm); color: var(--color-noir-silver); font-size: 0.9rem;">
          Goal: <span id="options-goal" class="text-red"></span> points
        </p>
      </div>

      <div class="options-section">
        <h3>Actions</h3>
        <div class="options-actions">
          <button id="options-end-game" class="btn btn-secondary">End Game & Return Home</button>
          <button id="options-resume" class="btn btn-primary">Resume Game</button>
        </div>
      </div>
    </div>
  </div>

  <script src="game.js?v=2"></script>
</body>

</html>